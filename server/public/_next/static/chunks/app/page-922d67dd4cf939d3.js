(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5345:function(e,t,a){Promise.resolve().then(a.bind(a,8916))},8916:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var r=a(7437),s=a(2265);let n=e=>{let{icon:t,error:a,className:s="",...n}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"relative group",children:[t&&(0,r.jsx)("div",{className:" absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 group-focus-within:text-blue-500 dark:group-focus-within:text-blue-400 transition-colors duration-200 ",children:t}),(0,r.jsx)("input",{className:"\n            w-full rounded-xl border-2 border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800\n            px-4 py-3 text-base\n            text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\n            transition-all duration-200 ease-out\n            hover:border-gray-300 dark:hover:border-slate-600 hover:shadow-md dark:hover:shadow-slate-900/50\n            focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:focus:ring-blue-900/50\n            disabled:bg-gray-100 dark:disabled:bg-slate-900 disabled:cursor-not-allowed disabled:hover:border-gray-200 dark:disabled:hover:border-slate-700\n            ".concat(t?"pl-11":"","\n            ").concat(a?"border-red-500 dark:border-red-600 focus:border-red-500 dark:focus:border-red-600 focus:ring-red-100 dark:focus:ring-red-900/50":"","\n            ").concat(s,"\n          "),...n}),(0,r.jsx)("div",{className:" absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 ease-out group-focus-within:w-full "})]}),a&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1 animate-slide-up",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a]})]})};var l=a(9734);let o=e=>{let{className:t=""}=e,{theme:a,toggleTheme:s}=(0,l.T)(),n="light"===a?"切换到深色模式":"切换到浅色模式";return(0,r.jsxs)("button",{onClick:s,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),s())},className:"\n        relative\n        p-2 rounded-lg\n        text-gray-700 dark:text-gray-200\n        hover:text-gray-900 dark:hover:text-white\n        transition-all duration-300 ease-out\n        hover:scale-110 active:scale-95\n        focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2\n        dark:focus:ring-blue-400/50 dark:focus:ring-offset-2\n        dark:focus:ring-offset-transparent\n        ".concat(t,"\n      "),"aria-label":n,"aria-pressed":"dark"===a,"aria-live":"polite",title:n,type:"button",role:"switch","aria-checked":"dark"===a,children:[(0,r.jsx)("svg",{className:"\n          w-5 h-5 no-transition\n          ".concat("light"===a?"opacity-100 rotate-0 scale-100":"opacity-0 rotate-90 scale-0 absolute inset-0 m-auto","\n        "),style:{transition:"opacity 500ms ease-out, transform 500ms ease-out"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,r.jsx)("svg",{className:"\n          w-5 h-5 no-transition\n          ".concat("dark"===a?"opacity-100 rotate-0 scale-100":"opacity-0 -rotate-90 scale-0 absolute inset-0 m-auto","\n        "),style:{transition:"opacity 500ms ease-out, transform 500ms ease-out"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})]})},i=e=>{let{tags:t,selectedTags:a,onTagToggle:n}=e,[l,o]=(0,s.useState)(!1),i=e=>{n(e)};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"transition-all duration-300",style:{paddingRight:"100px"},children:(0,r.jsx)("div",{className:"\n            flex flex-wrap items-center gap-2\n            ".concat(l?"":"overflow-hidden","\n          "),style:{maxHeight:l?"none":"40px"},children:t.map(e=>{let t=a.has(String(e.id));return(0,r.jsx)("button",{onClick:()=>i(String(e.id)),className:"\n                  px-3 py-1.5 rounded-md\n                  text-xs font-medium\n                  transition-colors duration-200\n                  flex-shrink-0\n                  h-8\n                  ".concat(t?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600","\n                "),type:"button",children:e.name},String(e.id))})})}),t.length>0&&(0,r.jsx)("button",{onClick:()=>{o(!l)},className:" absolute right-0 top-0 px-3 py-1.5 rounded-md text-xs font-medium bg-gray-600 text-gray-300 hover:bg-gray-500 transition-all duration-200 flex items-center gap-1 flex-shrink-0 h-8 z-10 ",type:"button",children:l?(0,r.jsxs)(r.Fragment,{children:["收起",(0,r.jsx)("svg",{className:"w-3 h-3 transform rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}):(0,r.jsxs)(r.Fragment,{children:["展开",(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})},d=e=>{let{onSearch:t,searchQuery:a,tags:s=[],selectedTags:l=new Set,onTagToggle:d,totalPrompts:c=0,filteredPrompts:u=0,onClearFilters:x}=e;return(0,r.jsxs)("header",{className:"header-glass",children:[(0,r.jsx)("div",{className:" absolute inset-0  bg-gradient-to-b from-white/5 via-transparent to-black/5 dark:from-white/3 dark:via-transparent dark:to-black/8 pointer-events-none "}),(0,r.jsx)("div",{className:" absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent dark:via-blue-300/20 "}),(0,r.jsxs)("div",{className:"px-4 sm:px-6 lg:px-[30px] py-4 relative z-10",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4 sm:right-6 lg:right-[30px] z-10",children:(0,r.jsx)(o,{})}),(0,r.jsxs)("div",{className:"mb-4 pr-12",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-1",children:"提示词图库"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-400",children:"浏览、精选和提炼您的提示词库。快速查找示例，探索灵感。"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-4",children:[t&&(0,r.jsxs)("div",{className:"relative flex-1 min-w-0 sm:flex-initial sm:w-72 lg:w-80",children:[(0,r.jsx)(n,{type:"text",placeholder:"搜索提示词...",value:a||"",onChange:e=>{t&&t(e.target.value)},className:"!py-1.5 pr-9 bg-gray-800 border-gray-600 text-white placeholder-gray-400 text-sm h-9",icon:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a&&(0,r.jsx)("button",{onClick:()=>{t&&t("")},className:" absolute right-2.5 top-1/2 -translate-y-1/2 p-0.5 rounded-full text-gray-400 hover:text-gray-200 hover:bg-gray-700 transition-all duration-200 ease-out active:scale-90 ","aria-label":"清空搜索",children:(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.size>0&&(0,r.jsxs)("button",{onClick:x,className:" flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-xs sm:text-sm font-medium rounded-lg border border-gray-600 transition-all duration-200 ease-out active:scale-95 flex-shrink-0 ","aria-label":"清除标签筛选",children:[(0,r.jsx)("svg",{className:"w-3 sm:w-4 h-3 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"清除筛选"}),(0,r.jsx)("span",{className:"sm:hidden",children:"清除"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-400 sm:ml-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,r.jsx)("svg",{className:"w-3 sm:w-4 h-3 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsxs)("span",{className:"hidden sm:inline",children:["显示 ",u," / ",c," 个案例"]}),(0,r.jsxs)("span",{className:"sm:hidden",children:[u,"/",c," 案例"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,r.jsxs)("svg",{className:"w-3 sm:w-4 h-3 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,r.jsx)("path",{d:"M9 2a1 1 0 000 2h2a1 0 100-2H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),(0,r.jsxs)("span",{className:"hidden sm:inline",children:[l.size," 个标签已选"]}),(0,r.jsxs)("span",{className:"sm:hidden",children:[l.size," 标签"]})]})]})]}),s.length>0&&d&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(i,{tags:s,selectedTags:l,onTagToggle:d})})]})]})};var c=a(3145);let u=e=>{if(!e)return"/placeholder.svg";if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=e.startsWith("/")?e:"/".concat(e);return"".concat("/assets").concat(t)},x=e=>{let{prompt:t,onClick:a}=e;return(0,r.jsxs)("div",{className:" group relative overflow-hidden rounded-xl cursor-pointer flex flex-col shadow-md hover:shadow-xl dark:shadow-slate-900/50 dark:hover:shadow-slate-900/70 transition-smooth hover:scale-[1.02] hover:-translate-y-1 active:scale-[0.98] active:translate-y-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:focus-visible:ring-blue-400 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-slate-900 border border-gray-200 dark:border-slate-700 h-full ",style:{backgroundColor:"var(--card-bg)"},onClick:()=>a(t),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a(t))},children:[(0,r.jsxs)("div",{className:"relative w-full aspect-square bg-gray-100 dark:bg-slate-700 overflow-hidden",children:[t.attachments&&t.attachments.length>0?(0,r.jsx)(c.default,{src:u(t.attachments[0].thumbnail_url||t.attachments[0].download_url),alt:t.name,fill:!0,className:"object-cover transition-smooth group-hover:scale-105",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500",children:(0,r.jsx)("svg",{className:"w-16 h-16 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("div",{className:" absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out "}),(0,r.jsx)("div",{className:" absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform scale-75 group-hover:scale-100 ",children:(0,r.jsx)("div",{className:" bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-full p-3 shadow-lg ",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-gray-800 dark:text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),(0,r.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,r.jsx)("h3",{className:" text-base font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 transition-colors duration-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 ",children:t.name}),t.tags&&t.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-auto pt-[10px]",children:t.tags.map(e=>(0,r.jsx)("span",{className:" inline-flex items-center px-2 py-1 text-xs font-medium rounded-md transition-all duration-200 leading-none ",style:{backgroundColor:"".concat(e.color,"20"),color:e.color,border:"1px solid ".concat(e.color,"40")},children:e.name},e.id))})]}),(0,r.jsx)("div",{className:" absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out origin-left "})]})},m=e=>{let{totalItems:t,visibleItems:a}=e,[n,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=setTimeout(()=>{l(!1)},5e3);return()=>clearTimeout(e)},[]),n)?(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50 animate-fade-in",children:(0,r.jsxs)("div",{className:"rounded-lg shadow-lg border border-gray-200 dark:border-slate-700 p-3 backdrop-blur-sm",style:{backgroundColor:"var(--card-bg)"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"虚拟滚动已启用"})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsxs)("div",{children:["总数据: ",(0,r.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:t})]}),(0,r.jsxs)("div",{children:["渲染中: ",(0,r.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:a})]}),(0,r.jsxs)("div",{className:"text-gray-500 dark:text-gray-500",children:["性能提升: ",Math.round((1-a/t)*100),"%"]})]}),(0,r.jsx)("button",{onClick:()=>l(!1),className:"mt-2 text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 underline",children:"关闭"})]})}):null},h=e=>{let{children:t,isLoading:a=!1,className:n=""}=e,l=(0,s.useRef)(null),[o,i]=(0,s.useState)(!1),[d,c]=(0,s.useState)(0);return(0,s.useEffect)(()=>{if(!a&&t){c(e=>e+1),i(!0);let e=setTimeout(()=>{i(!1)},600);return()=>clearTimeout(e)}},[t,a]),(0,r.jsx)("div",{ref:l,className:"\n        ".concat(n,"\n        ").concat(o?"animate-page-slide-in":"","\n        transition-smooth\n      "),children:t},d)},g=e=>{let{children:t,index:a,isNewContent:s=!1,className:n=""}=e;return(0,r.jsx)("div",{className:"\n        ".concat(n,"\n        transition-smooth\n        ").concat(s?"animate-card-stagger ".concat("stagger-".concat(Math.min(a%6+1,6))):"animate-fade-in","\n      "),children:t})},p=e=>{let{isVisible:t,text:a="加载更多..."}=e;return t?(0,r.jsx)("div",{className:"flex justify-center items-center py-8 animate-fade-in",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsx)("span",{className:"text-sm animate-loading-pulse",children:a}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"w-1 h-1 bg-current rounded-full animate-smooth-bounce",style:{animationDelay:"0s"}}),(0,r.jsx)("div",{className:"w-1 h-1 bg-current rounded-full animate-smooth-bounce",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"w-1 h-1 bg-current rounded-full animate-smooth-bounce",style:{animationDelay:"0.4s"}})]})]})}):null},b=e=>{let{scrollProgress:t,isVisible:a=!0}=e;return a?(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 h-1 bg-gray-200 dark:bg-slate-700",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 ease-out",style:{width:"".concat(Math.min(100*t,100),"%")}})}):null},v=e=>{let{prompts:t,loading:a,onCardClick:n,hasMore:l,onLoadMore:o}=e,i=(0,s.useRef)(null),d=(0,s.useRef)(null),[c,u]=(0,s.useState)(0),[v,f]=(0,s.useState)(0),[j,k]=(0,s.useState)(800),[y,w]=(0,s.useState)(0),[N,C]=(0,s.useState)(!1),[L,z]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!i.current)return;let e=()=>{if(i.current){let e=i.current.offsetWidth,t=window.innerHeight-200;u(e),k(t)}},t=setTimeout(()=>{e()},0),a=new ResizeObserver(()=>{setTimeout(e,10)});return i.current&&a.observe(i.current),window.addEventListener("resize",e),()=>{clearTimeout(t),a.disconnect(),window.removeEventListener("resize",e)}},[]);let M=(0,s.useCallback)(e=>{let{scrollTop:r,scrollHeight:s,clientHeight:n}=e.currentTarget;f(r),w(s>n?r/(s-n):0),(r+n)/s>.67&&l&&!a&&!N&&o&&(C(!0),z(t.length),o())},[l,a,N,o,t.length]),S=(0,s.useMemo)(()=>{let e=c-60,a=6;c<640?a=2:c<1024?a=3:c<1280?a=4:c<1536&&(a=5);let r=(e+21)/a,s=Math.ceil(t.length/a);return{columnCount:a,columnWidth:r,rowHeight:r-21+94,rowCount:s,gap:21,padding:30}},[c,t.length]),_=(0,s.useMemo)(()=>({startRow:Math.max(0,Math.floor(v/S.rowHeight)-2),endRow:Math.min(S.rowCount,Math.ceil((v+j)/S.rowHeight)+2)}),[v,j,S.rowHeight,S.rowCount]),E=(0,s.useMemo)(()=>{let e=_.startRow*S.columnCount,a=_.endRow*S.columnCount;return t.slice(e,a).map((t,a)=>{let r=e+a;return{prompt:t,row:Math.floor(r/S.columnCount),col:r%S.columnCount,index:r,isNewContent:r>=L}})},[t,_,S.columnCount,L]);if((0,s.useEffect)(()=>{if(!a&&N){let e=setTimeout(()=>{C(!1)},300);return()=>clearTimeout(e)}},[a,N]),a&&0===t.length)return(0,r.jsx)(h,{isLoading:!0,children:(0,r.jsx)("div",{className:" grid gap-[21px] grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 px-[30px] py-8 ",children:[...Array(18)].map((e,t)=>(0,r.jsx)(g,{index:t%6,className:"animate-card-stagger",children:(0,r.jsxs)("div",{className:"rounded-xl shadow-md dark:shadow-slate-900/50 overflow-hidden border border-gray-200 dark:border-slate-700 animate-shimmer",style:{backgroundColor:"var(--card-bg)"},children:[(0,r.jsx)("div",{className:"w-full aspect-square bg-gradient-to-br from-gray-200 to-gray-300 dark:from-slate-700 dark:to-slate-600 animate-loading-pulse"}),(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-slate-700 rounded w-3/4 animate-loading-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-slate-700 rounded w-1/2 animate-loading-pulse",style:{animationDelay:"0.1s"}})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-slate-700 rounded-full w-16 animate-loading-pulse",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-slate-700 rounded-full w-20 animate-loading-pulse",style:{animationDelay:"0.3s"}}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-slate-700 rounded-full w-12 animate-loading-pulse",style:{animationDelay:"0.4s"}})]})]})]})},t))})});if(!t||0===t.length)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[500px] px-[30px]",children:(0,r.jsxs)("div",{className:"text-center max-w-md animate-fade-in",children:[(0,r.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 dark:bg-slate-700 opacity-30 blur-3xl rounded-full animate-pulse"}),(0,r.jsx)("svg",{className:"relative z-10 mx-auto h-32 w-32 text-gray-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"未找到相关提示词"}),(0,r.jsx)("p",{className:"text-base text-gray-500 dark:text-gray-400 mb-6",children:"尝试调整搜索关键词或筛选条件"}),(0,r.jsxs)("div",{className:"rounded-lg p-4 text-left border border-gray-200 dark:border-slate-700",style:{backgroundColor:"var(--surface)"},children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"搜索建议："}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"使用更通用的关键词"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"检查拼写是否正确"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"尝试选择不同的标签"]})]})]})]})});let T=S.rowCount*S.rowHeight+64;return(0,r.jsxs)("div",{ref:i,className:"w-full relative",children:[(0,r.jsx)(b,{scrollProgress:y,isVisible:t.length>20}),c>0&&t.length>0?(0,r.jsxs)(h,{isLoading:a&&0===t.length,children:[(0,r.jsx)("div",{ref:d,className:"overflow-y-auto overflow-x-hidden ultra-smooth-scroll",style:{height:"".concat(j,"px")},onScroll:M,children:(0,r.jsx)("div",{style:{height:"".concat(T,"px"),position:"relative"},children:E.map(e=>{let{prompt:t,row:a,col:s,index:l,isNewContent:o}=e;return(0,r.jsx)("div",{style:{position:"absolute",left:"".concat(S.padding+s*S.columnWidth,"px"),top:"".concat(32+a*S.rowHeight,"px"),width:"".concat(S.columnWidth-S.gap,"px"),height:"".concat(S.rowHeight-S.gap,"px"),zIndex:1,pointerEvents:"auto"},children:(0,r.jsx)(g,{index:s,isNewContent:o,className:"h-full",children:(0,r.jsx)(x,{prompt:t,onClick:n})})},t.id)})})}),(0,r.jsx)(p,{isVisible:a&&t.length>0,text:"加载更多内容..."}),!l&&t.length>0&&(0,r.jsx)("div",{className:"flex justify-center items-center py-8 animate-fade-in",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-slate-800 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"已加载全部 ",t.length," 个提示词"]})})}),t.length>50&&(0,r.jsx)(m,{totalItems:t.length,visibleItems:E.length})]}):t.length>0?(0,r.jsx)(h,{isLoading:a,children:(0,r.jsx)("div",{className:" grid gap-[21px] grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 px-[30px] py-8 ",children:t.map((e,t)=>(0,r.jsx)(g,{index:t%6,className:"animate-fade-in",children:(0,r.jsx)(x,{prompt:e,onClick:n})},e.id))})}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[500px]",children:(0,r.jsx)("div",{className:"text-gray-400 animate-loading-pulse",children:"正在初始化..."})})]})};var f=a(4887);let j=e=>{let{isOpen:t,onClose:a,children:n,className:l=""}=e,[o,i]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{i(!0)},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,a]),(0,s.useEffect)(()=>{if(t){let e=document.querySelector(".ultra-smooth-scroll");if(e){let t=e.style.overflow;return e.style.overflow="hidden",()=>{e.style.overflow=t}}}},[t]),!o)return null;let d=(0,r.jsxs)("div",{className:"\n        fixed inset-0 z-[99999] \n        flex items-center justify-center \n        p-4 \n        transition-all duration-300 ease-out\n        ".concat(t?"visible opacity-100":"invisible opacity-0","\n      "),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,pointerEvents:t?"auto":"none"},children:[(0,r.jsx)("div",{className:"\n          absolute inset-0 \n          bg-gradient-to-br from-black/40 via-black/50 to-black/60\n          backdrop-blur-md backdrop-saturate-150 backdrop-brightness-75\n          transition-all duration-500 ease-out\n          ".concat(t?"opacity-100 backdrop-blur-md":"opacity-0 backdrop-blur-none","\n        "),onClick:a,"aria-hidden":"true",style:{position:"absolute",top:0,left:0,right:0,bottom:0,backdropFilter:t?"blur(12px) saturate(150%) brightness(0.75) contrast(1.1)":"blur(0px) saturate(100%) brightness(1) contrast(1)",WebkitBackdropFilter:t?"blur(12px) saturate(150%) brightness(0.75) contrast(1.1)":"blur(0px) saturate(100%) brightness(1) contrast(1)",background:t?"linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0.6) 100%)":"transparent"}}),(0,r.jsx)("div",{className:"\n          relative z-10\n          w-full max-w-4xl max-h-[90vh] \n          bg-white/95 dark:bg-slate-800/95\n          backdrop-blur-xl backdrop-saturate-150\n          rounded-2xl \n          shadow-[0_32px_64px_-12px_rgba(0,0,0,0.4)]\n          dark:shadow-[0_32px_64px_-12px_rgba(0,0,0,0.8)]\n          border border-white/20 dark:border-slate-600/30\n          ring-1 ring-black/5 dark:ring-white/10\n          overflow-hidden \n          transition-all duration-500 ease-out\n          ".concat(t?"scale-100 opacity-100 translate-y-0 rotate-0":"scale-95 opacity-0 translate-y-8 rotate-1"," \n          ").concat(l,"\n        "),onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",style:{position:"relative",zIndex:10},children:n})]});return(0,f.createPortal)(d,document.body)},k=e=>{let{prompt:t,isOpen:a,onClose:n}=e,[l,o]=(0,s.useState)({});if(!t)return null;let i=async(e,t)=>{try{await navigator.clipboard.writeText(e),o(e=>({...e,[t]:!0})),setTimeout(()=>{o(e=>({...e,[t]:!1}))},3e3)}catch(e){console.error("复制失败:",e)}},d=e=>{let{content:t,contentId:a,size:s="sm"}=e,n=l[a];return(0,r.jsx)("button",{onClick:()=>i(t,a),className:"\n          ".concat("sm"===s?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"," \n          rounded-md font-medium\n          transition-all duration-200 ease-out\n          flex items-center gap-1.5\n          shadow-sm hover:shadow-md\n          active:scale-95\n          focus:outline-none focus:ring-2 focus:ring-offset-1\n          ").concat(n?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-400","\n        "),type:"button","aria-label":n?"已复制到剪贴板":"复制内容到剪贴板",title:n?"已复制":"复制",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"".concat("sm"===s?"w-3 h-3":"w-4 h-4"," animate-scale-in"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"已复制"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"".concat("sm"===s?"w-3 h-3":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"复制"]})})};return(0,r.jsx)(j,{isOpen:a,onClose:n,children:(0,r.jsxs)("div",{className:"p-6 sm:p-8 max-h-[90vh] overflow-y-auto ultra-smooth-scroll",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex-1 pr-4",children:[(0,r.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-3 leading-tight",children:t.name}),t.author&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,r.jsxs)("span",{children:["作者: ",(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.author})]})]})]}),(0,r.jsx)("button",{onClick:n,className:" flex-shrink-0 p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-200 ease-out active:scale-90 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-slate-800 ",type:"button","aria-label":"关闭对话框",title:"关闭",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-8",children:t.tags.map((e,t)=>(0,r.jsx)("span",{className:" px-3 py-1.5 text-sm font-medium rounded-full border shadow-sm animate-fade-in ",style:{backgroundColor:"".concat(e.color,"15"),color:e.color,borderColor:"".concat(e.color,"40"),animationDelay:"".concat(50*t,"ms"),animationFillMode:"backwards"},children:e.name},e.id))}),t.attachments&&t.attachments.length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"示例图片",(0,r.jsxs)("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full",children:[t.attachments.length," 张"]})]}),(0,r.jsx)("div",{className:"\n              grid gap-4\n              ".concat(1===t.attachments.length?"grid-cols-1 max-w-md mx-auto":2===t.attachments.length?"grid-cols-1 md:grid-cols-2":3===t.attachments.length?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3","\n            "),children:t.attachments.map((e,t)=>(0,r.jsxs)("div",{className:" relative w-full aspect-square rounded-xl overflow-hidden bg-gray-100 dark:bg-slate-700 shadow-md dark:shadow-slate-900/50 group cursor-pointer animate-fade-in hover:shadow-xl transition-all duration-300 ",style:{animationDelay:"".concat(100*t,"ms"),animationFillMode:"backwards"},children:[(0,r.jsx)(c.default,{src:u(e.download_url||e.thumbnail_url),alt:e.original_filename||e.filename||"示例图片 ".concat(t+1),fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110",sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"}),(0,r.jsx)("div",{className:" absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3 ",children:(0,r.jsxs)("div",{className:"text-white text-sm",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.original_filename||e.filename}),e.file_size&&(0,r.jsxs)("p",{className:"text-xs opacity-80",children:[(e.file_size/1024/1024).toFixed(1)," MB"]})]})}),(0,r.jsx)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full",children:t+1})]},e.id||t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"提示词内容",t.versions&&t.versions.length>1&&(0,r.jsxs)("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:[t.versions.length," 个版本"]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[t.current_version&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-600",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["当前版本: ",t.current_version.version]}),(0,r.jsx)("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"最新"})]}),(()=>{let e=t.current_version.content,a=t.current_version.contentzh;return e&&a?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-blue-200 dark:border-blue-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"提示词1"}),(0,r.jsx)(d,{content:t.current_version.content||"",contentId:"current-content-".concat(t.current_version.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:t.current_version.content}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-300 dark:via-blue-500 to-transparent"})]}),(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-blue-200 dark:border-blue-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"提示词2"}),(0,r.jsx)(d,{content:t.current_version.contentzh||"",contentId:"current-contentzh-".concat(t.current_version.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:t.current_version.contentzh}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-300 dark:via-blue-500 to-transparent"})]})]}):(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-blue-200 dark:border-blue-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"提示词"}),(0,r.jsx)(d,{content:e?t.current_version.content:t.current_version.contentzh||"暂无内容",contentId:"current-single-".concat(t.current_version.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:e?t.current_version.content:t.current_version.contentzh||"暂无内容"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-300 dark:via-blue-500 to-transparent"})]})})()]}),t.versions&&t.versions.length>0&&(0,r.jsx)(r.Fragment,{children:t.versions.filter(e=>{var a;return e.id!==(null===(a=t.current_version)||void 0===a?void 0:a.id)}).map(e=>(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-600",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["版本: ",e.version]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]}),(()=>{let t=e.content,a=e.contentzh;return t&&a?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词1"}),(0,r.jsx)(d,{content:e.content||"",contentId:"version-content-".concat(e.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:e.content}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]}),(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词2"}),(0,r.jsx)(d,{content:e.contentzh||"",contentId:"version-contentzh-".concat(e.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:e.contentzh}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]})]}):(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词"}),(0,r.jsx)(d,{content:t?e.content:e.contentzh||"暂无内容",contentId:"version-single-".concat(e.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:t?e.content:e.contentzh||"暂无内容"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]})})()]},e.id))}),!t.current_version&&(!t.versions||0===t.versions.length)&&(()=>{let e=t.content,a=t.contentzh;return e&&a?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词1"}),(0,r.jsx)(d,{content:t.content||"",contentId:"base-content-".concat(t.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:t.content}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]}),(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词2"}),(0,r.jsx)(d,{content:t.contentzh||"",contentId:"base-contentzh-".concat(t.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:t.contentzh}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]})]}):(0,r.jsxs)("div",{className:"relative p-5 rounded-xl border-2 border-gray-200 dark:border-slate-600 shadow-inner",style:{background:"linear-gradient(to bottom right, var(--surface), var(--background))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"提示词"}),(0,r.jsx)(d,{content:e?t.content||"":t.contentzh||"暂无内容",contentId:"base-single-".concat(t.id)})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono leading-relaxed",children:e?t.content:t.contentzh||"暂无内容"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-slate-500 to-transparent"})]})})()]})]})]})})},y=e=>{let{threshold:t=400,className:a=""}=e,[n,l]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=e=>{e.target.scrollTop>t?l(!0):l(!1)},a=document.querySelector(".ultra-smooth-scroll");if(a)return a.addEventListener("scroll",e),()=>a.removeEventListener("scroll",e)},[t]),n)?(0,r.jsx)("button",{onClick:()=>{i(!0);let e=document.querySelector(".ultra-smooth-scroll");e&&e.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{i(!1)},800)},disabled:o,className:"\n        fixed bottom-8 right-8 z-50\n        w-12 h-12 rounded-full\n        bg-white dark:bg-slate-800\n        border border-gray-200 dark:border-slate-700\n        shadow-lg dark:shadow-slate-900/50\n        text-gray-600 dark:text-gray-300\n        hover:text-blue-600 dark:hover:text-blue-400\n        hover:border-blue-300 dark:hover:border-blue-600\n        hover:shadow-xl\n        transition-all duration-300 ease-out\n        animate-fade-in\n        ".concat(o?"animate-smooth-bounce":"hover:scale-110","\n        ").concat(a,"\n      "),"aria-label":"滚动到顶部",title:"滚动到顶部",children:(0,r.jsx)("svg",{className:"w-6 h-6 mx-auto transition-transform duration-300 ".concat(o?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}):null},w=a(3464).Z.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}});w.interceptors.request.use(e=>e,e=>Promise.reject(e)),w.interceptors.response.use(e=>e,e=>(console.error("API 请求错误:",e.message),Promise.reject(e)));let N=async e=>{let{page:t=1,limit:a=20,search:r,tags:s,tag:n,...l}=e||{},o={...l,limit:a,offset:(t-1)*a,q:r};if(s&&s.length>0){let e=s.filter(e=>"all"!==e);e.length>0&&(o.tags=e.join(","))}else n&&"all"!==n&&(o.tag=n);return(await w.get("/prompts",{params:o})).data},C=async()=>(await w.get("/tags")).data,L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pageSize:t=20,tags:a,search:r,debounceMs:n=300}=e,[l,o]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(0),[h,g]=(0,s.useState)(1),[p,b]=(0,s.useState)(!0),v=(0,s.useRef)(null),f=(0,s.useRef)(!1),j=(0,s.useRef)(!0);(0,s.useEffect)(()=>(j.current=!0,()=>{j.current=!1}),[]);let k=(0,s.useCallback)(async function(e,a,r){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.current&&j.current)try{f.current=!0,d(!0),u(null);let l=await N({page:e,limit:t,tags:a,search:r});if(!j.current)return;if(l.success){var n;let e=Array.isArray(l.data)?l.data:[],t=(null===(n=l.pagination)||void 0===n?void 0:n.total)||0;m(t),s?o(a=>{let r=[...a,...e];return b(r.length<t),r}):(o(e),b(e.length<t))}else u(l.message||"获取提示词失败"),s||o([])}catch(e){j.current&&(u(e instanceof Error?e.message:"网络请求失败"),s||o([]))}finally{j.current&&d(!1),f.current=!1}},[t]),y=(0,s.useCallback)(async()=>{if(!p||i)return;let e=h+1;g(e),await k(e,a,r,!0)},[p,i,h,a,r,k]),w=(0,s.useCallback)(async()=>{g(1),b(!0),await k(1,a,r,!1)},[a,r,k]);return(0,s.useEffect)(()=>(v.current&&clearTimeout(v.current),g(1),b(!0),r?v.current=setTimeout(()=>{k(1,a,r,!1)},n):k(1,a,r,!1),()=>{v.current&&clearTimeout(v.current)}),[null==a?void 0:a.join(","),r,n,k]),{prompts:l,loading:i,error:c,hasMore:p,loadMore:y,refetch:w,total:x}},z=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(new Set),[n,l]=(0,s.useState)(!0),[o,i]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{try{l(!0),i(null);let e=await C();if(e.success){let a=e.data.items.map(e=>({...e,count:e.prompt_count||e.count||0}));t(a)}else i(e.message||"获取标签失败"),t([])}catch(e){i(e instanceof Error?e.message:"网络请求失败"),t([])}finally{l(!1)}},[]);(0,s.useEffect)(()=>{d()},[]);let c=(0,s.useCallback)(e=>{r(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},[]),u=(0,s.useCallback)(()=>{r(new Set)},[]),x=(0,s.useCallback)(()=>{r(new Set)},[]),m=(0,s.useCallback)(e=>a.has(e),[a]);return{tags:e,selectedTags:a,toggleTag:c,clearTags:u,selectAllTags:x,isTagSelected:m,loading:n,error:o,refetch:(0,s.useCallback)(async()=>{await d()},[d])}};function M(){let[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)(null),{tags:l,selectedTags:o,toggleTag:i,loading:c}=z(),u=Array.from(o).sort().join(","),x=(0,s.useMemo)(()=>Array.from(o),[u]),{prompts:m,loading:h,error:g,total:p,hasMore:b,loadMore:f}=L({pageSize:30,tags:x.length>0?x:void 0,search:e||void 0}),j=()=>{!h&&b&&f()};return(0,s.useEffect)(()=>{let e=e=>{let{scrollTop:t,scrollHeight:a,clientHeight:r}=e.target;(t+r)/a>.9&&b&&!h&&j()},t=document.querySelector(".ultra-smooth-scroll");if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[b,h,j]),(0,r.jsxs)("main",{className:"h-screen overflow-hidden",children:[(0,r.jsx)(k,{prompt:a,isOpen:!!a,onClose:()=>{n(null)}}),(0,r.jsxs)("div",{className:"h-screen overflow-y-auto ultra-smooth-scroll prevent-flash transition-smooth",style:{background:"linear-gradient(to bottom, var(--surface), var(--background))"},children:[(0,r.jsx)(d,{onSearch:e=>{t(e)},searchQuery:e,tags:l,selectedTags:o,onTagToggle:e=>{i(e)},totalPrompts:p,filteredPrompts:m.length,onClearFilters:()=>{o.forEach(e=>i(e))}}),(0,r.jsxs)("div",{className:"relative",children:[g&&(0,r.jsx)("div",{className:"px-[30px]",children:(0,r.jsx)("div",{className:"mt-8 p-5 bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-xl shadow-md animate-slide-down",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900 dark:text-red-100 mb-1",children:"加载失败"}),(0,r.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:g})]})]})})}),(0,r.jsx)(v,{prompts:m,loading:h,onCardClick:e=>{n(e)},hasMore:b,onLoadMore:j})]}),(0,r.jsx)("footer",{className:"mt-16 py-8 border-t border-gray-200 dark:border-slate-700 animate-fade-in",style:{backgroundColor:"var(--card-bg)"},children:(0,r.jsx)("div",{className:"px-[30px] text-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"探索更多优质 AI 提示词，激发创意灵感"})})}),(0,r.jsx)(y,{threshold:300})]})]})}},9734:function(e,t,a){"use strict";a.d(t,{T:function(){return c},ThemeProvider:function(){return d}});var r=a(7437),s=a(2265);let n=(0,s.createContext)(void 0),l="theme-preference",o=()=>{try{let e=localStorage.getItem(l);if("light"===e||"dark"===e)return e}catch(e){console.warn("无法读取主题偏好设置:",e)}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},i=()=>{let e=document.documentElement.getAttribute("data-theme");return"dark"===e||"light"===e?e:"light"};function d(e){let{children:t}=e,[a,d]=(0,s.useState)(()=>i()),[c,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=i(),t=o();d("light"!==e?e:t),u(!0)},[]),(0,s.useEffect)(()=>{if(!c)return;let e=document.documentElement;e.classList.add("theme-transition"),e.setAttribute("data-theme",a),"dark"===a?e.classList.add("dark"):e.classList.remove("dark");try{localStorage.setItem(l,a)}catch(e){console.warn("无法保存主题偏好设置:",e)}let t=setTimeout(()=>{e.classList.remove("theme-transition")},300);return()=>clearTimeout(t)},[a,c]),(0,r.jsx)(n.Provider,{value:{theme:a,toggleTheme:()=>{d(e=>"light"===e?"dark":"light")},setTheme:e=>{d(e)}},children:t})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useThemeContext 必须在 ThemeProvider 内部使用");return e}}},function(e){e.O(0,[63,971,117,744],function(){return e(e.s=5345)}),_N_E=e.O()}]);