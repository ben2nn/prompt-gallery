(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8773:function(e,t,n){Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,4137)),Promise.resolve().then(n.bind(n,9734))},4137:function(e,t,n){"use strict";n.d(t,{NoFlashProvider:function(){return d},ThemeScript:function(){return a}});var o=n(7437),r=n(2265);let d=e=>{let{children:t}=e,[n,d]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=e||t;document.documentElement.setAttribute("data-theme",n),"dark"===n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),s(!0)}catch(e){console.warn("主题初始化失败:",e),s(!0)}})()},[]),(0,r.useEffect)(()=>{if(!a)return;let e=()=>{document.documentElement.classList.remove("loading"),document.documentElement.classList.add("loaded"),document.body&&(document.body.classList.remove("loading"),document.body.classList.add("loaded")),d(!0)};return"complete"===document.readyState?e():(window.addEventListener("load",e),document.addEventListener("DOMContentLoaded",e)),()=>{window.removeEventListener("load",e),document.removeEventListener("DOMContentLoaded",e)}},[a]),(0,r.useEffect)(()=>{if(!a)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{if(!localStorage.getItem("theme")){let t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),"dark"===t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[a]),a)?(0,o.jsx)("div",{className:"prevent-flash ".concat(n?"loaded":"preload"),children:t}):(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"var(--background, #ffffff)",zIndex:9999}})},a=()=>(0,o.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n(function() {\n  try {\n    // 立即设置加载状态到 documentElement（html 元素）\n    document.documentElement.classList.add('loading');\n    \n    // 安全地设置 body 的加载状态（如果 body 存在的话）\n    if (document.body) {\n      document.body.classList.add('loading');\n    } else {\n      // 如果 body 还不存在，等待 DOM 加载后再设置\n      document.addEventListener('DOMContentLoaded', function() {\n        if (document.body) {\n          document.body.classList.add('loading');\n        }\n      });\n    }\n    \n    // 获取保存的主题或使用系统主题\n    var savedTheme = localStorage.getItem('theme');\n    var systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    var theme = savedTheme || systemTheme;\n    \n    // 立即应用主题\n    document.documentElement.setAttribute('data-theme', theme);\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    }\n    \n    // 设置基础样式变量\n    var root = document.documentElement;\n    if (theme === 'dark') {\n      root.style.setProperty('--background', '#0f172a');\n      root.style.setProperty('--foreground', '#f1f5f9');\n    } else {\n      root.style.setProperty('--background', '#ffffff');\n      root.style.setProperty('--foreground', '#111827');\n    }\n  } catch (e) {\n    console.warn('防闪屏脚本执行失败:', e);\n  }\n})();\n"}})},9734:function(e,t,n){"use strict";n.d(t,{T:function(){return l},ThemeProvider:function(){return m}});var o=n(7437),r=n(2265);let d=(0,r.createContext)(void 0),a="theme-preference",s=()=>{try{let e=localStorage.getItem(a);if("light"===e||"dark"===e)return e}catch(e){console.warn("无法读取主题偏好设置:",e)}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},c=()=>{let e=document.documentElement.getAttribute("data-theme");return"dark"===e||"light"===e?e:"light"};function m(e){let{children:t}=e,[n,m]=(0,r.useState)(()=>c()),[l,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=c(),t=s();m("light"!==e?e:t),i(!0)},[]),(0,r.useEffect)(()=>{if(!l)return;let e=document.documentElement;e.classList.add("theme-transition"),e.setAttribute("data-theme",n),"dark"===n?e.classList.add("dark"):e.classList.remove("dark");try{localStorage.setItem(a,n)}catch(e){console.warn("无法保存主题偏好设置:",e)}let t=setTimeout(()=>{e.classList.remove("theme-transition")},300);return()=>clearTimeout(t)},[n,l]),(0,o.jsx)(d.Provider,{value:{theme:n,toggleTheme:()=>{m(e=>"light"===e?"dark":"light")},setTheme:e=>{m(e)}},children:t})}function l(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useThemeContext 必须在 ThemeProvider 内部使用");return e}},2778:function(){}},function(e){e.O(0,[461,971,117,744],function(){return e(e.s=8773)}),_N_E=e.O()}]);